<script lang="ts" setup>
import { ref, watch } from 'vue'
import { ArrowRight } from '@element-plus/icons-vue'
import { useRouter, type RouteLocationNormalizedLoadedGeneric } from 'vue-router';

const router = useRouter();
const routeName = ref(router.currentRoute.value.name);
const routePath = ref(router.currentRoute.value.path);
const FirstPath = [
    '/',
    '/History',
    '/DocCrawler',
    '/DocPrepare',
    '/Setting'
];
const breadcrumbItems = ref([
    { name: routeName.value, path: routePath.value }
]);


//-------------------------------分割线--------------------------------

const generateBreadcrumbItems = ((route: RouteLocationNormalizedLoadedGeneric) => {
    if (FirstPath.includes(route.path)) {
        breadcrumbItems.value = [{ name: route.name, path: route.path }];
    } else {
        breadcrumbItems.value.push({ name: route.name, path: route.path });
    };
});


watch(() => router.currentRoute.value, (newRoute) => {
    generateBreadcrumbItems(newRoute)
}, {
    immediate: true
})




</script>


<template>
    <el-breadcrumb :separator-icon="ArrowRight">
        <el-breadcrumb-item v-for="(item, index) in breadcrumbItems" :key="index" :to="item.path">
            <svg t="1746687177665" class="icon" viewBox="0 0 1067 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="4497" width="16" height="16">
                <path
                    d="M192.143147 128 374.293632 128C409.904213 128 438.436779 156.421547 438.436779 192.14336L438.436779 374.29376C438.436779 409.904213 410.015061 438.436693 374.293632 438.436693L192.143147 438.436693C156.532608 438.436693 128 410.015147 128 374.29376L128 192.14336C128 156.53248 156.421717 128 192.143147 128ZM938.666667 692.372907C938.666667 656.762453 910.244949 628.229973 874.52352 628.229973L692.373035 628.229973C656.762453 628.229973 628.229888 656.65152 628.229888 692.372907L628.229888 874.523307C628.229888 910.134187 656.651605 938.666667 692.373035 938.666667L831.253333 938.666667C843.035435 938.666667 852.586667 948.218027 852.586667 960 852.586667 971.781973 843.035435 981.333333 831.253333 981.333333L692.373035 981.333333C633.050197 981.333333 585.563221 933.661013 585.563221 874.523307L585.563221 692.372907C585.563221 633.050027 633.235413 585.563307 692.373035 585.563307L874.52352 585.563307C933.846357 585.563307 981.333333 633.235627 981.333333 692.372907L981.333333 835.400107C981.333333 847.18208 971.782059 856.73344 960 856.73344 948.217941 856.73344 938.666667 847.18208 938.666667 835.400107L938.666667 692.372907ZM85.333333 374.29376C85.333333 433.61664 133.005568 481.10336 192.143147 481.10336L374.293632 481.10336C433.616469 481.10336 481.103445 433.43104 481.103445 374.29376L481.103445 192.14336C481.103445 132.82048 433.431253 85.333333 374.293632 85.333333L192.143147 85.333333C132.820309 85.333333 85.333333 133.005653 85.333333 192.14336L85.333333 374.29376ZM585.563221 374.29376C585.563221 433.61664 633.235413 481.10336 692.373035 481.10336L874.52352 481.10336C933.846357 481.10336 981.333333 433.43104 981.333333 374.29376L981.333333 192.14336C981.333333 132.82048 933.661099 85.333333 874.52352 85.333333L692.373035 85.333333C633.050197 85.333333 585.563221 133.005653 585.563221 192.14336L585.563221 374.29376ZM85.333333 874.523307C85.333333 933.846187 133.005568 981.333333 192.143147 981.333333L374.293632 981.333333C433.616469 981.333333 481.103445 933.661013 481.103445 874.523307L481.103445 692.372907C481.103445 633.050027 433.431253 585.563307 374.293632 585.563307L192.143147 585.563307C132.820309 585.563307 85.333333 633.235627 85.333333 692.372907L85.333333 874.523307ZM192.143147 628.229973 374.293632 628.229973C409.904213 628.229973 438.436779 656.65152 438.436779 692.372907L438.436779 874.523307C438.436779 910.134187 410.015061 938.666667 374.293632 938.666667L192.143147 938.666667C156.532608 938.666667 128 910.24512 128 874.523307L128 692.372907C128 656.762453 156.421717 628.229973 192.143147 628.229973ZM692.373035 128 874.52352 128C910.134059 128 938.666667 156.421547 938.666667 192.14336L938.666667 374.29376C938.666667 409.904213 910.244949 438.436693 874.52352 438.436693L692.373035 438.436693C656.762453 438.436693 628.229888 410.015147 628.229888 374.29376L628.229888 192.14336C628.229888 156.53248 656.651605 128 692.373035 128Z"
                    fill="#A5A9AA" p-id="4498"></path>
            </svg>
            {{ item.name }}
        </el-breadcrumb-item>
    </el-breadcrumb>
</template>
